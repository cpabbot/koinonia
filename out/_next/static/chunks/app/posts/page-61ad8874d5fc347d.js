(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[991],{1704:function(t,s,e){Promise.resolve().then(e.bind(e,5872))},5872:function(t,s,e){"use strict";e.r(s),e.d(s,{default:function(){return f}});var n=e(7437),i=e(3479),o=e.n(i),a=e(2265);async function c(){let t=await fetch("https://q3rj22ezm0.execute-api.us-east-1.amazonaws.com/posts",{cache:"no-store"});return t.json()}async function r(t){let s={content:t.get("content")},e=await fetch("https://q3rj22ezm0.execute-api.us-east-1.amazonaws.com/posts",{method:"POST",body:JSON.stringify(s)});return e}async function u(t){let s=await fetch("https://q3rj22ezm0.execute-api.us-east-1.amazonaws.com/posts/".concat(t),{method:"DELETE"});return s}var l=e(6599),m=e.n(l);function p(){let[t,s]=(0,a.useState)([]),[e,i]=(0,a.useState)(!0),[o,l]=(0,a.useState)(!1),[p,h]=(0,a.useState)();(0,a.useEffect)(()=>{let t=async()=>{try{i(!0);let t=await c();s(t.Items),i(!1)}catch(t){h("Error fetching data")}finally{i(!1)}};t()},[o]);let d=t=>{let{item:s}=t;return(0,n.jsxs)("div",{className:m().postListing,children:[(0,n.jsx)("span",{children:s.content.S}),(0,n.jsx)("button",{className:"button",onClick:()=>f(s.postID.S),children:"delete"})]})},f=t=>{u(t).then(()=>{l(!o)})};return e?(0,n.jsx)("p",{children:"Loading..."}):p?(0,n.jsxs)("p",{children:["Error: ",p]}):(0,n.jsxs)("div",{className:m().postsList,children:[(0,n.jsxs)("form",{action:t=>{r(t).then(()=>{l(!o)})},className:m().form,children:[(0,n.jsx)("input",{type:"text",name:"content",className:m().input}),(0,n.jsx)("button",{type:"submit",className:m().submit,children:"Submit"})]}),t.map(t=>(0,n.jsx)(d,{item:t},t.postID.S))]})}var h=e(9011),d=e(2593);function f(){return(0,n.jsx)("main",{className:o().main,children:(0,n.jsxs)(d._,{loginMechanisms:["username"],children:[(0,n.jsx)("h1",{children:"Koinonia"}),(0,n.jsx)("div",{style:{width:"100%"},children:(0,n.jsx)(p,{})})]})})}e(619),h.V.configure({Auth:{Cognito:{userPoolClientId:"11bsgoodcjpe7qqpt9a6r83me9",userPoolId:"us-east-1_KAWpB6wsg"}}})},6599:function(t){t.exports={postsList:"PostList_postsList__zp66g",postListing:"PostList_postListing__TD4WB",form:"PostList_form__3hbdL",input:"PostList_input__ifdoh",submit:"PostList_submit__uV4cz"}},3479:function(t){t.exports={main:"page_main__IoJZG"}}},function(t){t.O(0,[347,191,971,472,744],function(){return t(t.s=1704)}),_N_E=t.O()}]);